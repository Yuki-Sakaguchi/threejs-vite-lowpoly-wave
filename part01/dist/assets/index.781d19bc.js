import*as e from"https://unpkg.com/three@0.126.1/build/three.module.js";import{OrbitControls as t}from"https://unpkg.com/three@0.126.1/examples/jsm/controls/OrbitControls.js";import{G as n,g as o}from"./vendor.d7829961.js";function i(){p.geometry.dispose(),p.geometry=new e.PlaneGeometry(r.plane.width,r.plane.height,r.plane.widthSegments,r.plane.heightSegments);const{array:t}=p.geometry.attributes.position,n=[];for(let e=0;e<t.length;e++){if(e%3==0){const n=t[e],o=t[e+1],i=t[e+2];t[e]=n+3*(Math.random()-.5),t[e+1]=o+3*(Math.random()-.5),t[e+2]=i+3*(Math.random()-.5)}n.push(Math.random()*Math.PI*2)}p.geometry.attributes.position.originalPosition=p.geometry.attributes.position.array,p.geometry.attributes.position.randomValues=n;const o=[];for(let e=0;e<p.geometry.attributes.position.count;e++)o.push(0,.19,.4);p.geometry.setAttribute("color",new e.BufferAttribute(new Float32Array(o),3))}const a=new n,r={plane:{width:400,height:400,widthSegments:50,heightSegments:50}};a.add(r.plane,"width",1,500).onChange(i),a.add(r.plane,"height",1,500).onChange(i),a.add(r.plane,"widthSegments",1,100).onChange(i),a.add(r.plane,"heightSegments",1,100).onChange(i);const s={x:void 0,y:void 0},d=new e.Raycaster,h=new e.Scene,g=new e.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3);g.position.z=50;const m=new e.WebGLRenderer;m.setSize(window.innerWidth,window.innerHeight),m.setPixelRatio(window.devicePixelRatio),document.body.appendChild(m.domElement),new t(g,m.domElement);const l=new e.PlaneGeometry(r.plane.width,r.plane.height,r.plane.widthSegments,r.plane.heightSegments),c=new e.MeshPhongMaterial({side:e.DoubleSide,flatShading:e.FlatShading,vertexColors:!0}),p=new e.Mesh(l,c);h.add(p),i();const w=new e.DirectionalLight(16777215,1);w.position.set(0,1,1),h.add(w);const b=new e.DirectionalLight(16777215,1);b.position.set(0,0,-1),h.add(b);let u=0;!function e(){requestAnimationFrame(e),m.render(h,g),u+=.01,d.setFromCamera(s,g);const{array:t,originalPosition:n,randomValues:i}=p.geometry.attributes.position;for(let o=0;o<t.length;o+=3)t[o]=n[o]+.01*Math.cos(u+i[o]),t[o+1]=n[o+1]+.001*Math.cos(u+i[o]);p.geometry.attributes.position.needsUpdate=!0;const a=d.intersectObject(p);if(a.length>0){const{color:e}=a[0].object.geometry.attributes,t={r:0,g:.19,b:.4},n={r:.1,g:.5,b:1};o.to(n,{r:t.r,g:t.g,b:t.b,duration:1,onUpdate(){e.setX(a[0].face.a,n.r),e.setY(a[0].face.a,n.g),e.setZ(a[0].face.a,n.b),e.setX(a[0].face.b,n.r),e.setY(a[0].face.b,n.g),e.setZ(a[0].face.b,n.b),e.setX(a[0].face.c,n.r),e.setY(a[0].face.c,n.g),e.setZ(a[0].face.c,n.b),e.needsUpdate=!0}})}}(),window.addEventListener("mousemove",(e=>{s.x=e.clientX/innerWidth*2-1,s.y=-e.clientY/innerHeight*2+1}));
